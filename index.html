<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Pendaftaran Lomba Maulid - SMA Negeri 11 Mataram</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .success-message, .error-message {
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        .success-message.show, .error-message.show {
            display: block;
            opacity: 1;
        }
        
        .btn-submit {
            background: linear-gradient(135deg, #2c8a4a 0%, #1e6e34 100%);
            transition: all 0.3s ease;
        }
        
        .btn-submit:hover {
            background: linear-gradient(135deg, #1e6e34 0%, #2c8a4a 100%);
            transform: scale(1.05);
        }
        
        .footer {
            background: linear-gradient(135deg, #2c8a4a 0%, #1e6e34 100%);
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">
    <!-- Header dengan Logo -->
    <header class="py-6 bg-white shadow-md">
        <div class="container mx-auto px-4 flex justify-center">
            <img src="logosekolah.png" 
                 alt="Logo SMA Negeri 11 Mataram" 
                 class="h-20 w-20 rounded-full shadow-md object-cover">
        </div>
    </header>

    <!-- Konten Utama -->
    <main class="flex-grow flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
        <div class="card bg-white p-8 rounded-xl shadow-lg w-full max-w-md">
            <h1 class="text-2xl font-bold text-center text-gray-800 mb-2">Form Pendaftaran Lomba Maulid</h1>
            <h2 class="text-lg text-center text-gray-600 mb-6">SMA Negeri 11 Mataram</h2>
            
            <form id="registrationForm" class="space-y-5">
                <!-- Nama Lengkap -->
                <div>
                    <label for="nama" class="block text-sm font-medium text-gray-700 mb-1">Nama Lengkap</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-user text-gray-400"></i>
                        </div>
                        <input type="text" id="nama" name="nama" required 
                            class="pl-10 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                            placeholder="Masukkan nama lengkap">
                    </div>
                </div>

                <!-- Kelas -->
                <div>
                    <label for="kelas" id="kelasLabel" class="block text-sm font-medium text-gray-700 mb-1">Kelas (contoh: X IPA 1)</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-graduation-cap text-gray-400"></i>
                        </div>
                        <input type="text" id="kelas" name="kelas" required 
                            class="pl-10 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                            placeholder="Contoh: X IPA 1">
                    </div>
                </div>

                <!-- Cabang Lomba -->
                <div>
                    <label for="cabang_lomba" class="block text-sm font-medium text-gray-700 mb-1">Cabang Lomba</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-trophy text-gray-400"></i>
                        </div>
                        <select id="cabang_lomba" name="cabang_lomba" required 
                            class="pl-10 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500">
                            <option value="">Pilih Cabang Lomba</option>
                            <option value="Sholawat">Sholawat</option>
                            <option value="Ceramah">Ceramah</option>
                            <option value="Tanya Jawab Berantai">Tanya Jawab Berantai</option>
                        </select>
                    </div>
                </div>

                <!-- Tombol Submit -->
                <div>
                    <button type="submit" class="btn-submit w-full py-3 px-4 rounded-lg shadow-md text-white font-semibold">
                        <i class="fas fa-paper-plane mr-2"></i> Daftar
                    </button>
                </div>
            </form>

            <!-- Status Message -->
            <div id="successMessage" class="success-message mt-6 p-4 rounded-lg text-center bg-green-100 text-green-700 border border-green-200">
                <i class="fas fa-check-circle mr-2"></i> Pendaftaran berhasil dikirim! Terima kasih telah mendaftar.
            </div>

            <div id="errorMessage" class="error-message mt-6 p-4 rounded-lg text-center bg-red-100 text-red-700 border border-red-200">
                <i class="fas fa-exclamation-circle mr-2"></i> Terjadi kesalahan saat mengirim pendaftaran. Silakan coba lagi.
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer py-4 text-white text-center mt-8">
        <div class="container mx-auto px-4">
            Â© ROHIS SMA Negeri 11 Mataram
        </div>
    </footer>

    <script>
        const webhookURL = "https://discord.com/api/webhooks/1396064802136395866/K5l1ukkOYqg8RkJbgoV1WuWWQGGiKeHMA1UmWvKuJC-39TtnUtOFrnOQQktHYJlwKs8m";
        
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('registrationForm');
            const cabangLombaSelect = document.getElementById('cabang_lomba');
            const kelasInput = document.getElementById('kelas');
            const kelasLabel = document.getElementById('kelasLabel');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            
            cabangLombaSelect.addEventListener('change', function() {
                if (this.value === 'Sholawat') {
                    kelasLabel.textContent = 'Kelas (hanya kelas, contoh: X IPA)';
                    kelasInput.placeholder = 'Masukkan kelas tanpa nomor';
                } else {
                    kelasLabel.textContent = 'Kelas (contoh: X IPA 1)';
                    kelasInput.placeholder = 'Contoh: X IPA 1';
                }
            });
            
            form.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const formData = {
                    nama: document.getElementById('nama').value,
                    kelas: document.getElementById('kelas').value,
                    cabang_lomba: document.getElementById('cabang_lomba').value,
                    timestamp: new Date().toLocaleString('id-ID')
                };
                
                if (formData.cabang_lomba === 'Sholawat') {
                    const kelasPattern = /^[XVI]{1,3} [A-Za-z]+$/;
                    if (!kelasPattern.test(formData.kelas)) {
                        showStatus('Format kelas untuk lomba Sholawat harus berupa kelas saja (contoh: X IPA)', 'error');
                        return;
                    }
                }
                
                try {
                    const response = await fetch(webhookURL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            content: `**Pendaftaran Lomba Maulid Baru**\n\n**Nama:** ${formData.nama}\n**Kelas:** ${formData.kelas}\n**Cabang Lomba:** ${formData.cabang_lomba}\n**Waktu Pendaftaran:** ${formData.timestamp}`,
                            username: 'Bot Pendaftaran Lomba Maulid',
                            avatar_url: 'https://cdn-icons-png.flaticon.com/512/2913/2913440.png'
                        }),
                    });
                    
                    if (response.ok) {
                        showStatus('Pendaftaran berhasil dikirim!', 'success');
                        form.reset();
                    } else {
                        showStatus('Terjadi kesalahan saat mengirim data. Silakan coba lagi.', 'error');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    showStatus('Terjadi kesalahan jaringan. Silakan coba lagi.', 'error');
                }
            });
            
            function showStatus(message, type) {
                if (type === 'success') {
                    successMessage.innerHTML = `<i class="fas fa-check-circle mr-2"></i> ${message}`;
                    successMessage.classList.add('show');
                    errorMessage.classList.remove('show');
                    setTimeout(() => successMessage.classList.remove('show'), 5000);
                } else {
                    errorMessage.innerHTML = `<i class="fas fa-exclamation-circle mr-2"></i> ${message}`;
                    errorMessage.classList.add('show');
                    successMessage.classList.remove('show');
                    setTimeout(() => errorMessage.classList.remove('show'), 5000);
                }
            }
        });
    </script>
</body>
</html>